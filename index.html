<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rituva</title>

<style>
:root{
  --bg:#000;
  --card:#1a1a1a;
  --soft:#222;
  --text:#fff;
  --muted:#9a9a9a;
  --radius:26px;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,system-ui;
}
.app{
  max-width:430px;
  margin:0 auto;
  padding:18px;
}

/* HEADER */
.header h1{
  font-size:34px;
  font-weight:800;
  margin-bottom:18px;
}

/* SEARCH */
.search-box{
  display:flex;
  flex-direction:column;
  gap:14px;
  margin-bottom:28px;
}
.search-box input,
.search-box button{
  padding:18px;
  font-size:18px;
  border:none;
  border-radius:var(--radius);
  background:var(--soft);
  color:var(--text);
}

/* HERO */
.hero small{
  color:var(--muted);
  font-size:18px;
}
.hero-temp{
  font-size:84px;
  font-weight:800;
  margin-bottom:22px;
}

/* SECTION */
.section-title{
  font-size:26px;
  font-weight:700;
  margin:30px 0 16px;
}

/* CARDS */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}
.card{
  background:var(--card);
  padding:22px;
  border-radius:var(--radius);
  text-align:center;
}
.card small{
  color:var(--muted);
  font-size:15px;
}
.card b{
  display:block;
  font-size:32px;
  margin-top:6px;
}
.full{grid-column:1 / -1}

footer{
  text-align:center;
  color:var(--muted);
  font-size:14px;
  margin:40px 0 10px;
}
</style>
</head>

<body>
<div class="app">

<div class="header">
  <h1>ğŸŒ¦ï¸ Rituva</h1>
</div>

<div class="search-box">
  <input id="search" placeholder="Search city"
         onkeydown="if(event.key==='Enter')searchCity()">
  <button onclick="searchCity()">Search</button>
  <button onclick="useMyLocation()">ğŸ“ Use My Location</button>
</div>

<div class="hero">
  <small id="city">My Location</small>
  <div class="hero-temp" id="temp">--Â°C</div>
</div>

<!-- TEMPERATURE -->
<div class="section-title">ğŸŒ¡ Temperature</div>
<div class="grid">
  <div class="card"><small>Today Min</small><b id="todayMin">--</b></div>
  <div class="card"><small>Today Max</small><b id="todayMax">--</b></div>
  <div class="card"><small>Next 24H Min</small><b id="nextMin">--</b></div>
  <div class="card"><small>Next 24H Max</small><b id="nextMax">--</b></div>
</div>

<!-- CURRENT CONDITIONS -->
<div class="section-title">ğŸŒ§ Conditions</div>
<div class="grid">
  <div class="card"><small>Humidity</small><b id="humidity">--</b></div>
  <div class="card"><small>Wind</small><b id="wind">--</b></div>
  <div class="card"><small>Rain Probability</small><b id="rainProb">--</b></div>
  <div class="card"><small>Rain Intensity</small><b id="rainIntensity">--</b></div>
  <div class="card"><small>Road Risk</small><b id="roadRisk">--</b></div>
  <div class="card"><small>Heavy Rain Risk</small><b id="stormRisk">--</b></div>
</div>

<!-- AIR QUALITY -->
<div class="section-title">ğŸŒ¬ Air Quality</div>
<div class="grid">
  <div class="card full">
    <small>PM2.5 (Âµg/mÂ³)</small>
    <b id="pm25">--</b>
  </div>
  <div class="card"><small>Children</small><b id="aqiChild">--</b></div>
  <div class="card"><small>Elderly</small><b id="aqiOld">--</b></div>
  <div class="card"><small>Asthma</small><b id="aqiAsthma">--</b></div>
</div>

<!-- HEAT & COLD -->
<div class="section-title">ğŸŒ Heat & Cold Stress</div>
<div class="grid">
  <div class="card"><small>UV Index</small><b id="uv">--</b></div>
  <div class="card"><small>Sunburn Risk</small><b id="sunburn">--</b></div>
  <div class="card"><small>Wet-Bulb Temp</small><b id="wetbulb">--</b></div>
  <div class="card"><small>Cold Exposure</small><b id="coldRisk">--</b></div>
</div>

<!-- HUMAN IMPACT -->
<div class="section-title">ğŸ§  Human Impact</div>
<div class="grid">
  <div class="card"><small>Mood</small><b id="mood">--</b></div>
  <div class="card"><small>Productivity</small><b id="productivity">--</b></div>
  <div class="card full"><small>Best Outdoor Time</small><b id="bestTime">--</b></div>
</div>

<!-- SUN -->
<div class="section-title">ğŸŒ… Sun & Trust</div>
<div class="grid">
  <div class="card"><small>Sunrise / Sunset</small><b id="sun">--</b></div>
  <div class="card"><small>Golden Hour</small><b id="golden">--</b></div>
  <div class="card"><small>Data Confidence</small><b>Medium</b></div>
  <div class="card"><small>Last Updated</small><b id="updated">--</b></div>
</div>

<footer>
Â© Manik Roy 2025 Â· Indicative insights only
</footer>

</div>

<script>
const city=document.getElementById("city");
const search=document.getElementById("search");
const el={};
[
 "temp","humidity","wind","rainProb","rainIntensity","roadRisk","stormRisk",
 "pm25","aqiChild","aqiOld","aqiAsthma",
 "uv","sunburn","wetbulb","coldRisk",
 "mood","productivity","bestTime",
 "sun","golden","updated",
 "todayMin","todayMax","nextMin","nextMax"
].forEach(id=>el[id]=document.getElementById(id));

function wetBulb(t,h){
  return (
    t*Math.atan(0.151977*Math.sqrt(h+8.313659)) +
    Math.atan(t+h) - Math.atan(h-1.676331) +
    0.00391838*Math.pow(h,1.5)*Math.atan(0.023101*h) - 4.686035
  ).toFixed(1);
}
function addHour(t,o){
  let[h,m]=t.split(":").map(Number);
  h=(h+o+24)%24;
  return `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}`;
}

async function load(lat,lon,name){
  city.innerText=name;

  const w=await fetch(
`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,precipitation,wind_speed_10m&daily=sunrise,sunset,uv_index_max&current_weather=true&timezone=auto`
  ).then(r=>r.json());

  const a=await fetch(
`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&hourly=pm2_5`
  ).then(r=>r.json());

  const i=0;
  const t=w.current_weather.temperature;
  const h=w.hourly.relative_humidity_2m[i];
  const wind=w.current_weather.windspeed;
  const rp=w.hourly.precipitation_probability[i];
  const rm=w.hourly.precipitation[i];
  const pm=a.hourly.pm2_5[i];

  el.temp.innerText=`${t}Â°C`;
  el.humidity.innerText=`${h}%`;
  el.wind.innerText=`${wind} km/h`;
  el.rainProb.innerText=`${rp}%`;
  el.rainIntensity.innerText=rm===0?"None":rm<2?"Light":rm<10?"Moderate":"Heavy";
  el.roadRisk.innerText=rm>=10?"Avoid":rm>=2?"Caution":"Safe";
  el.stormRisk.innerText=rm>=10?"Likely":"Low";

  el.pm25.innerText=Math.round(pm);
  el.aqiChild.innerText=pm>75?"High":"Low";
  el.aqiOld.innerText=pm>100?"High":"Moderate";
  el.aqiAsthma.innerText=pm>60?"High":"Low";

  const uv=w.daily.uv_index_max[0];
  el.uv.innerText=uv;
  el.sunburn.innerText=uv>=8?"Severe":uv>=5?"High":"Low";
  el.wetbulb.innerText=wetBulb(t,h)+"Â°C";
  el.coldRisk.innerText=t<=8?"High":"Low";

  el.mood.innerText=rp>=60?"Irritable":t>=35?"Drained":"Calm";
  el.productivity.innerText=(t>=20&&t<=30&&rp<30)?"High":"Low";
  el.bestTime.innerText=(rp<30&&uv<6)?"Morning / Evening":"Late Evening";

  const sr=w.daily.sunrise[0].slice(11,16);
  const ss=w.daily.sunset[0].slice(11,16);
  el.sun.innerText=`${sr} / ${ss}`;
  el.golden.innerText=`${sr} â€“ ${addHour(sr,1)} / ${addHour(ss,-1)} â€“ ${ss}`;

  const temps=w.hourly.temperature_2m.slice(0,24);
  el.todayMin.innerText=Math.min(...temps)+"Â°";
  el.todayMax.innerText=Math.max(...temps)+"Â°";
  const next=w.hourly.temperature_2m.slice(1,25);
  el.nextMin.innerText=Math.min(...next)+"Â°";
  el.nextMax.innerText=Math.max(...next)+"Â°";

  el.updated.innerText=new Date().toLocaleTimeString();
}

function useMyLocation(){
  navigator.geolocation.getCurrentPosition(
    p=>load(p.coords.latitude,p.coords.longitude,"My Location"),
    ()=>load(22.57,88.36,"Kolkata")
  );
}
async function searchCity(){
  if(!search.value)return;
  const g=await fetch(
`https://geocoding-api.open-meteo.com/v1/search?name=${search.value}&count=1`
  ).then(r=>r.json());
  if(g.results)
    load(g.results[0].latitude,g.results[0].longitude,g.results[0].name);
  else alert("City not found");
}
useMyLocation();
</script>
</body>
</html>
