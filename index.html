<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rituva</title>

<style>
:root{
  --bg:#000;
  --card:#5b5b5b;
  --soft:#1f1f1f;
  --text:#fff;
}
body{
  margin:0;
  background:linear-gradient(#111,#000);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
}
.app{
  max-width:420px;
  margin:auto;
  padding:16px;
}
.header{
  font-size:36px;
  font-weight:800;
  margin-bottom:16px;
}
.pill,.btn,input{
  background:var(--soft);
  border-radius:18px;
  padding:16px;
  margin-bottom:14px;
  font-size:18px;
  border:none;
  color:white;
  width:100%;
}
.btn{font-weight:700;text-align:center}
.location{
  font-size:28px;
  font-weight:700;
  margin-top:18px;
}
.temp{
  font-size:86px;
  font-weight:900;
  text-align:center;
  margin:20px 0;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}
.card{
  background:var(--card);
  border-radius:20px;
  padding:18px;
}
.card-title{font-size:18px}
.card-value{font-size:34px;font-weight:800}
.card-sub{font-size:16px}

.section-title{
  font-size:26px;
  font-weight:900;
  margin:28px 0 14px;
}

.week{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.day{
  background:var(--soft);
  border-radius:18px;
  padding:14px;
  text-align:center;
}
.day-name{font-size:18px;font-weight:700}
.day-temp{font-size:22px;font-weight:800;margin-top:6px}

.footer{
  margin:22px 0;
  text-align:center;
  font-size:14px;
  opacity:.7;
}
</style>
</head>

<body>
<div class="app">

<div class="header">üå¶ Rituva</div>
<div class="pill">üñ§ OLED Mode</div>

<input id="city" placeholder="Search city">
<div class="btn" onclick="searchCity()">Search</div>
<div class="btn" onclick="useLocation()">üìç Use My Location</div>

<div class="location" id="place">Detecting location‚Ä¶</div>
<div class="temp" id="temp">--¬∞C</div>

<!-- CORE GRID -->
<div class="grid">
  <div class="card">
    <div class="card-title">AQI (PM2.5)</div>
    <div class="card-value" id="aqi">--</div>
    <div class="card-sub" id="aqiText"></div>
  </div>
  <div class="card">
    <div class="card-title">Wind</div>
    <div class="card-value" id="wind">--</div>
    <div class="card-sub">km/h</div>
  </div>
</div>

<!-- FEELS LIKE -->
<div class="section-title">Feels-Like Impact</div>
<div class="grid">
  <div class="card">
    <div class="card-title">Feels Like</div>
    <div class="card-value" id="feels">--¬∞</div>
  </div>
  <div class="card">
    <div class="card-title">Difference</div>
    <div class="card-value" id="feelDiff">--¬∞</div>
  </div>
</div>

<!-- RAIN -->
<div class="section-title">Rain Intelligence</div>
<div class="grid">
  <div class="card">
    <div class="card-title">Rain Probability</div>
    <div class="card-value" id="rainProb">--%</div>
  </div>
  <div class="card">
    <div class="card-title">Intensity</div>
    <div class="card-value" id="rainInt">--</div>
  </div>
</div>

<!-- UV -->
<div class="section-title">UV & Sun Safety</div>
<div class="grid">
  <div class="card">
    <div class="card-title">UV Index</div>
    <div class="card-value" id="uv">--</div>
  </div>
  <div class="card">
    <div class="card-title">Sunburn Risk</div>
    <div class="card-value" id="uvRisk">--</div>
  </div>
</div>

<!-- 24H -->
<div class="section-title">Next 24 Hours</div>
<div class="grid">
  <div class="card">
    <div class="card-title">Min Temp</div>
    <div class="card-value" id="tmin">--¬∞</div>
  </div>
  <div class="card">
    <div class="card-title">Max Temp</div>
    <div class="card-value" id="tmax">--¬∞</div>
  </div>
</div>

<!-- 7 DAY -->
<div class="section-title">7-Day Forecast</div>
<div class="week" id="week"></div>

<div class="footer">Powered by Open-Meteo</div>
</div>

<script>
const days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];

function rainClass(mm){
  if(mm===0) return "None";
  if(mm<2) return "Light";
  if(mm<7) return "Moderate";
  return "Heavy";
}
function uvRisk(v){
  if(v<3) return "Low";
  if(v<6) return "Moderate";
  if(v<8) return "High";
  if(v<11) return "Very High";
  return "Extreme";
}

async function loadWeather(lat,lon,name){
  place.innerText=name;

  const w=await fetch(
    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}
    &current=temperature_2m,apparent_temperature,wind_speed_10m,precipitation_probability,uv_index
    &hourly=temperature_2m,precipitation
    &daily=temperature_2m_min,temperature_2m_max
    &timezone=auto`
  ).then(r=>r.json());

  temp.innerText=w.current.temperature_2m.toFixed(1)+"¬∞C";
  wind.innerText=w.current.wind_speed_10m;

  feels.innerText=w.current.apparent_temperature.toFixed(1)+"¬∞";
  feelDiff.innerText=
    (w.current.apparent_temperature-w.current.temperature_2m).toFixed(1)+"¬∞";

  rainProb.innerText=w.current.precipitation_probability+"%";
  rainInt.innerText=rainClass(w.hourly.precipitation[0]);

  uv.innerText=w.current.uv_index;
  uvRisk.innerText=uvRisk(w.current.uv_index);

  const next24=w.hourly.temperature_2m.slice(0,24);
  tmin.innerText=Math.min(...next24).toFixed(0)+"¬∞";
  tmax.innerText=Math.max(...next24).toFixed(0)+"¬∞";

  const aq=await fetch(
    `https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&current=pm2_5`
  ).then(r=>r.json());
  const pm=aq.current.pm2_5;
  aqi.innerText=Math.round(pm);
  aqiText.innerText=pm<30?"Good":pm<60?"Moderate":pm<90?"Poor":"Very Poor";

  week.innerHTML="";
  w.daily.time.forEach((d,i)=>{
    const day=new Date(d);
    week.innerHTML+=`
      <div class="day">
        <div class="day-name">${days[day.getDay()]}</div>
        <div class="day-temp">
          ${Math.round(w.daily.temperature_2m_min[i])}¬∞ /
          ${Math.round(w.daily.temperature_2m_max[i])}¬∞
        </div>
      </div>`;
  });
}

function useLocation(){
  navigator.geolocation.getCurrentPosition(
    p=>loadWeather(p.coords.latitude,p.coords.longitude,"Your Location"),
    ()=>alert("Location permission denied"),
    {enableHighAccuracy:true,timeout:10000}
  );
}
async function searchCity(){
  const q=city.value;
  if(!q) return;
  const g=await fetch(
    `https://geocoding-api.open-meteo.com/v1/search?name=${q}&count=1`
  ).then(r=>r.json());
  if(!g.results) return alert("City not found");
  const c=g.results[0];
  loadWeather(c.latitude,c.longitude,`${c.name}, ${c.country}`);
}
useLocation();
</script>

</body>
</html>
