<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Rituva</title>

<style>
:root{
  --bg:#000000;
  --card:#121212;
  --text:#ffffff;
  --muted:#cfcfcf;
}
.light{
  --bg:#f4f4f4;
  --card:#ffffff;
  --text:#000000;
  --muted:#555555;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  font-size:18px;
  line-height:1.6;
  -webkit-text-size-adjust:100%;
}
.app{
  max-width:480px;
  margin:0 auto;
  padding-bottom:28px;
  padding-left:env(safe-area-inset-left);
  padding-right:env(safe-area-inset-right);
}
.app-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px;
  position:sticky;
  top:0;
  background:var(--bg);
  z-index:10;
}
.title{font-size:26px;font-weight:800;}
.city{font-size:16px;color:var(--muted);}
.toggle{
  font-size:18px;
  padding:8px 12px;
  border-radius:20px;
  border:none;
  background:var(--card);
  color:var(--text);
}
.controls{
  display:grid;
  grid-template-columns:1fr auto auto;
  gap:10px;
  padding:12px 14px;
}
@media(max-width:420px){
  .controls{grid-template-columns:1fr;}
}
input,button{
  padding:14px;
  font-size:16px;
  border-radius:14px;
  border:none;
  min-height:48px;
}
section{padding:14px;}
h2{margin:12px 0 14px;font-size:20px;}
.cards{display:flex;flex-direction:column;gap:14px;}
.card{background:var(--card);padding:16px;border-radius:16px;}
.card b{
  display:block;
  margin-top:8px;
  font-size:32px;
  font-weight:800;
}
.main-temp b{font-size:48px;line-height:1.1;}
small{font-size:14px;color:var(--muted);}
footer{text-align:center;padding:16px;font-size:14px;color:var(--muted);}
@media(min-width:768px){
  body{display:flex;justify-content:center;}
  .cards{flex-direction:row;flex-wrap:wrap;}
  .card{flex:1 1 calc(50% - 16px);}
}
</style>
</head>
<body>
<div class="app">

<div class="app-header">
  <div>
    <div class="title">Rituva</div>
    <div class="city" id="city">Locatingâ€¦</div>
  </div>
  <button class="toggle" onclick="toggleTheme()">ğŸŒ™</button>
</div>

<div class="controls">
  <input id="search" placeholder="Search city" />
  <button onclick="searchCity()">Search</button>
  <button onclick="useMyLocation()">ğŸ“</button>
</div>

<section>
<h2>ğŸŒ¡ Current Conditions</h2>
<div class="cards">
  <div class="card main-temp">Temperature<b id="temp">--</b></div>
  <div class="card">24h Min / Max<b id="temp24">--</b></div>
  <div class="card">Humidity<b id="humidity">--</b></div>
  <div class="card">Wind<b id="wind">--</b></div>
</div>
</section>

<section>
<h2>ğŸŒ§ Rain</h2>
<div class="cards">
  <div class="card">Rain Intensity<b id="rainIntensity">--</b></div>
  <div class="card">Rain Probability<b id="rainProb">--</b></div>
  <div class="card">24h Rain<b id="rain24">--</b></div>
  <div class="card">Road Risk<b id="roadRisk">--</b></div>
</div>
</section>

<section>
<h2>ğŸŒ¬ Air Quality</h2>
<div class="cards">
  <div class="card">PM2.5<b id="pm25">--</b></div>
  <div class="card">Children<b id="aqiChild">--</b></div>
  <div class="card">Elderly<b id="aqiOld">--</b></div>
  <div class="card">Asthma<b id="aqiAsthma">--</b></div>
</div>
</section>

<section>
<h2>ğŸ“† 7-Day Temperature</h2>
<div class="cards">
  <div class="card">Min / Max<b id="temp7">--</b></div>
</div>
</section>

<section>
<h2>ğŸŒ… Sun</h2>
<div class="cards">
  <div class="card">Sunrise / Sunset<b id="sun">--</b></div>
  <div class="card">Golden Hour<b id="golden">--</b></div>
</div>
</section>

<footer>Â© Manik Roy 2025. All Rights Reserved.</footer>
</div>

<script>
const el=id=>document.getElementById(id);
const city=el('city'),temp=el('temp'),temp24=el('temp24'),humidity=el('humidity'),wind=el('wind');
const rainIntensity=el('rainIntensity'),rainProb=el('rainProb'),rain24=el('rain24'),roadRisk=el('roadRisk');
const pm25=el('pm25'),aqiChild=el('aqiChild'),aqiOld=el('aqiOld'),aqiAsthma=el('aqiAsthma');
const temp7=el('temp7'),sun=el('sun'),golden=el('golden');

function toggleTheme(){
  document.body.classList.toggle('light');
}

async function load(lat,lon,name){
  try{
    const w=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,precipitation,wind_speed_10m&daily=sunrise,sunset,temperature_2m_min,temperature_2m_max&current_weather=true&timezone=auto`).then(r=>r.json());
    const a=await fetch(`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&hourly=pm2_5`).then(r=>r.json());

    const idx=0;
    temp.textContent=w.current_weather.temperature+'Â°C';
    humidity.textContent=w.hourly.relative_humidity_2m[idx]+'%';
    wind.textContent=w.current_weather.windspeed+' km/h';

    const t24=w.hourly.temperature_2m.slice(0,24);
    temp24.textContent=Math.min(...t24).toFixed(1)+'Â° / '+Math.max(...t24).toFixed(1)+'Â°';

    const r24=w.hourly.precipitation.slice(0,24).reduce((a,b)=>a+b,0);
    rain24.textContent=r24.toFixed(1)+' mm';
    rainProb.textContent=w.hourly.precipitation_probability[idx]+'%';
    rainIntensity.textContent=r24===0?'None':r24<10?'Light':'Heavy';
    roadRisk.textContent=r24>=20?'Avoid':r24>=5?'Caution':'Safe';

    const pm=a.hourly.pm2_5 ? a.hourly.pm2_5[0] : null;
    pm25.textContent=pm?Math.round(pm):'N/A';
    aqiChild.textContent=pm>35?'High':'Low';
    aqiOld.textContent=pm>55?'High':'Moderate';
    aqiAsthma.textContent=pm>25?'High':'Low';

    temp7.textContent=Math.min(...w.daily.temperature_2m_min).toFixed(1)+'Â° / '+Math.max(...w.daily.temperature_2m_max).toFixed(1)+'Â°';

    const sr=w.daily.sunrise[0].slice(11,16);
    const ss=w.daily.sunset[0].slice(11,16);
    sun.textContent=sr+' / '+ss;
    golden.textContent=sr+'â€“'+ss;

    city.textContent=name;
  }catch(e){
    city.textContent='Data unavailable';
  }
}

function useMyLocation(){
  navigator.geolocation.getCurrentPosition(p=>load(p.coords.latitude,p.coords.longitude,'My Location'),()=>load(22.57,88.36,'Kolkata, India'));
}
async function searchCity(){
  const q=document.getElementById('search').value;
  if(!q)return;
  const g=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${q}&count=1`).then(r=>r.json());
  if(g.results)load(g.results[0].latitude,g.results[0].longitude,g.results[0].name+', '+g.results[0].country);
}
useMyLocation();
</script>
</body>
</html>